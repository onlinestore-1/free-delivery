 <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Product Details</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="referrer" content="strict-origin-when-cross-origin">

  <style>
    body{
      margin:0;
      font-family: Arial, sans-serif;
      background:#f4f4f4;
      padding:15px;
    }

    .card{
      background:#fff;
      padding:15px;
      border-radius:8px;
    }

    img{
      width:100%;
      border-radius:6px;
    }

    h2{
      margin:10px 0 5px;
    }

    button{
      width:100%;
      padding:10px;
      margin-top:8px;
      border:none;
      border-radius:5px;
      font-size:16px;
      cursor:pointer;
    }

    .buy{background:#ff9f00;}
    .cart{background:#2874f0;color:white;}

    input{width:60px;padding:5px;font-size:16px;}

    /* YOU MAY ALSO LIKE */
    h3{margin-top:25px;}

    .grid{
      display:grid;
      grid-template-columns:repeat(2,1fr);
      gap:10px;
    }

    .mini{
      background:#fff;
      padding:10px;
      border-radius:6px;
      cursor:pointer;
    }

    .mini img{
      width:100%;
      height:120px;
      object-fit:cover;
    }

    .mini p{
      margin:5px 0;
      font-size:14px;
    }
  </style>
</head>

<body>

<div class="card" id="productBox"></div>

<h3>You May Also Like</h3>
<div class="grid" id="likeBox"></div>

<script>
const products = JSON.parse(localStorage.getItem("allProducts")) || [
  {id:1,name:"Men T-shirt",price:12,img:"https://i.imgur.com/b4T6KVn.jpeg/200",desc:"Cotton T-shirt"},
  {id:2,name:"Dress",price:22,img:"https://i.imgur.com/F9T6D7U.jpeg/200",desc:"Ladies dress"},
  {id:3,name:"Sukari 1kg",price:30,img:"https://i.imgur.com/1EFgnRl.jpeg/200",desc:"Sukari 1kg"},
  {id:4,name:"Mafuta ya kupikia",price:45,img:"https://i.imgur.com/4B7cTjc.jpeg/200",desc:"Pika kisasa na korie"},
  {id:5,name:"Chumvi",price:30,img:"https://i.imgur.com/e4CXmHr.jpeg/200",desc:"chumvi bora"},
  {id:6,name:"Blue Band",price:30,img:"https://i.imgur.com/PnEvGZN.jpeg/200",desc:"Blue Band bora"},
  {id:7,name:"Tomato sauce",price:20,img:"https://i.imgur.com/IqhRkL7.jpeg/200",desc:"Tomato sauce tamu"},
  {id:8,name:"Soy sauce",price:10,img:"https://i.imgur.com/CqraWiO.jpeg/200",desc:"Jipatie soy sauce"},
  {id:9,name:"Baking powder",price:10,img:"https://i.imgur.com/WlfRjNu.jpeg/200",desc:"kwa mandazi"},
  {id:10,name:"Royco",price:14,img:"https://i.imgur.com/rmXvXwO.jpeg/200",desc:"Royco mchuzi mix"},
  {id:11,name:"Coca Cola",price:23,img:"https://i.imgur.com/UYZ1dIH.jpeg/200",desc:"Coca Cola"},
  {id:12,name:"pepsi",price:23,img:"https://i.imgur.com/cGRn5OZ.jpeg/200",desc:"pepsi"},
  {id:13,name:"Splash",price:12,img:"https://i.imgur.com/4ifKGQC.jpeg/200",desc:"Splash sweet flavour"},
  {id:14,name:"Bubble gum",price:15,img:"https://i.imgur.com/jJyMg1u.jpeg/200",desc:"Bubble gum flavoured ice lolly"},
  {id:15,name:"Ballcone",price:13,img:"https://i.imgur.com/YU7yVMc.jpeg/200",desc:"Ballcone flavoured ice cream"},
  {id:16,name:"Cherry",price:13,img:"https://i.imgur.com/Ax4J2uH.jpeg/200",desc:"Cherry flavoured ice lolly"},
  {id:17,name:"Cherry Bar",price:13,img:"https://i.imgur.com/QZ8B1VC.jpeg/200",desc:"Cherry flavoured ice bar"},
  {id:18,name:"Caramello",price:13,img:"https://i.imgur.com/HgeHJvR.jpeg/200",desc:"Caramello flavoured ice cream"},
  {id:19,name:"Doffi",price:17,img:"https://i.imgur.com/hD9g7L2.jpeg/200",desc:"Washing powder"},
  {id:20,name:"Jet",price:19,img:"https://i.imgur.com/OoGiHtj.jpeg/200",desc:"Dish washing liquid soap"},
  {id:21,name:"Jet",price:18,img:"https://i.imgur.com/q36RjQ2.jpeg/200",desc:"Dish washing liquid soap"},
  {id:22,name:"Vaseline Jelly",price:14,img:"https://i.imgur.com/iFw39jh.jpeg/200",desc:"Body lotion"},
  {id:23,name:"Rungu",price:14,img:"https://i.imgur.com/KIi9LUL.jpeg/200",desc:"Ya kuua wadudu warukao na wanaotambaa"},
  {id:24,name:"Professor",price:15,img:"https://i.imgur.com/okplIfF.jpeg/200",desc:"Professor Counter Book 3Q"},
  {id:25,name:"Vaseline",price:16,img:"https://i.imgur.com/2V7rzh7.jpeg/200",desc:"Pure petroleum jelly"},
  {id:26,name:"Rexa",price:17,img:"https://i.imgur.com/3EPfv80.jpeg/200",desc:"Rexa toilet paper soft and white"},
  {id:27,name:"Msomi",price:15,img:"https://i.imgur.com/zU2mjIE.jpeg/200",desc:"Msomi Exercise Book"},
  {id:28,name:"OMO",price:18,img:"https://i.imgur.com/v0eeorr.jpeg/200",desc:"Ondoa madoa sugu"},
  {id:29,name:"Niceone",price:18,img:"https://i.imgur.com/7nmPGbq.jpeg/200",desc:"Ondoa madoa sugu"},
  {id:30,name:"Hiper razor",price:19,img:"https://i.imgur.com/zIJlaP3.jpeg/200",desc:"kiwembe bora"},
  {id:31,name:"Afya Maji",price:23,img:"https://i.imgur.com/u9dkajs.jpeg/200",desc:"Afya maji ya kunywa Baridi au Ya moto eka idadi HAPO chini"},
  {id:32,name:"u-fresh orange",price:23,img:"https://i.imgur.com/k42X2gl.jpeg/200",desc:"u-fresh baridi ipo weka idadi hapo chini"},
  {id:33,name:"u-fresh power",price:23,img:"https://i.imgur.com/y1qJelw.jpeg/200",desc:"u-fresh baridi ipo weka idadi hapo chini"},
  {id:34,name:"u-fresh pineapple",price:23,img:"https://i.imgur.com/GcVEME3.jpeg/200",desc:"u-fresh baridi ipo weka idadi hapo chini"},
  {id:35,name:"Exercise Book",price:19,img:"https://i.imgur.com/AQrSAGW.jpeg/200",desc:"Daftari mistali mikubwa na midogo"},
  {id:36,name:"Exercise Book",price:19,img:"https://i.imgur.com/ihIcg3h.jpeg/200",desc:"Daftari la kuandikia page 100"},
  {id:37,name:"Exercise Book",price:17,img:"https://i.imgur.com/Hg8Aeea.jpeg/200",desc:"Daftari la kuandikia page 32"},
  {id:38,name:"Hand soap",price:17,img:"https://i.imgur.com/Mi3AaMB.jpeg/200",desc:"Liduid hand wash"},
  {id:39,name:"u-fresh passion",price:20,img:"https://i.imgur.com/9uhn4hj.jpeg/200",desc:"u-fresh baridi ipo weka idadi hapo chini"},
  {id:40,name:"u-fresh cola",price:21,img:"https://i.imgur.com/FvMtoAL.jpeg/200",desc:"u-fresh baridi ipo weka idadi hapo chini"}
];

const pid = localStorage.getItem("pid");
const p = products.find(x => x.id == pid);

// MAIN PRODUCT
document.getElementById("productBox").innerHTML = `
  <img src="${p.img}">
  <h2>${p.name}</h2>
  <p>${p.desc}</p>
  <b>$${p.price}</b><br><br>

  Qty:
  <input id="qty" type="number" value="1" min="1"><br><br>

  <button class="buy" onclick="buy()">Buy Now</button>
  <button class="cart" onclick="addCart()">Add to Cart</button>
`;

// YOU MAY ALSO LIKE (exclude current product)
const likeBox = document.getElementById("likeBox");
products.filter(x => x.id != pid).forEach(p2 => {
  likeBox.innerHTML += `
    <div class="mini" onclick="openProduct(${p2.id})">
      <img src="${p2.img}">
      <p>${p2.name}</p>
      <b>$${p2.price}</b>
    </div>
  `;
});

function openProduct(id){
  localStorage.setItem("pid", id);
  location.reload(); // reload product page with new product
}

function buy(){
  const qty = document.getElementById("qty").value;
  localStorage.setItem("buy", JSON.stringify({...p, qty}));
  location.href = "checkout.html";
}

function addCart(){
  const qty = document.getElementById("qty").value;
  let cart = JSON.parse(localStorage.getItem("cart")) || [];

  cart.push({...p, qty});

  if(cart.length >= 10){
    cart = [];
  }

  localStorage.setItem("cart", JSON.stringify(cart));
  alert("Added to cart âœ…");
}
</script>

</body>
</html>
